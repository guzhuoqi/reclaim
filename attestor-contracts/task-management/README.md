# MeChain ReclaimTask ä»»åŠ¡ç®¡ç†å·¥å…·

## ğŸ“‹ æ¦‚è¿°

æœ¬å·¥å…·ç”¨äºç®¡ç† MeChain ReclaimTask åˆçº¦ä¸­çš„ä»»åŠ¡åˆ›å»ºå’ŒæŸ¥çœ‹åŠŸèƒ½ã€‚

**åˆçº¦ä¿¡æ¯ï¼š**
- ReclaimTask åˆçº¦åœ°å€: `0x2ce4693Ea2a41941F0A798A62BC1eE9c3c31c820`
- Governance åˆçº¦åœ°å€: `0x0d113bDe369DC8Df8e24760473bB3C4965a17078`
- ç½‘ç»œ: MeChain æµ‹è¯•ç½‘ (`https://testnet-rpc.mechain.tech`)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¿«é€Ÿåˆ›å»ºä»»åŠ¡
```bash
./quick-create-task.sh
```

### 2. äº¤äº’å¼ç®¡ç†
```bash
./task-manager.sh
```

## ğŸ“– è¯¦ç»†åŠŸèƒ½

### ä»»åŠ¡åˆ›å»º

#### 1. è‡ªåŠ¨åˆ›å»ºä»»åŠ¡ï¼ˆæ¨èï¼‰
```bash
node create-task.js
```
- è‡ªåŠ¨ç”Ÿæˆéšæœºç§å­å’Œå½“å‰æ—¶é—´æˆ³
- è°ƒç”¨ `createNewTaskRequest` æ–¹æ³•
- è‡ªåŠ¨ä¿å­˜è¿”å›çš„ attestors ä¿¡æ¯

#### 2. è‡ªå®šä¹‰å‚æ•°åˆ›å»ºä»»åŠ¡
é€šè¿‡äº¤äº’å¼è„šæœ¬é€‰æ‹©è‡ªå®šä¹‰å‚æ•°é€‰é¡¹ï¼Œæˆ–ç›´æ¥ä¿®æ”¹è„šæœ¬ä¼ å…¥å‚æ•°ã€‚

### ä»»åŠ¡æŸ¥çœ‹

#### 1. æŸ¥çœ‹å½“å‰ä»»åŠ¡
```bash
node view-tasks.js
```

#### 2. æŸ¥çœ‹æŒ‡å®šä»»åŠ¡
```bash
node view-tasks.js task <ä»»åŠ¡ID>
```

#### 3. æŸ¥çœ‹æœ¬åœ°ä¿å­˜çš„ Attestors
```bash
node view-tasks.js local
```

#### 4. æŸ¥çœ‹ä»»åŠ¡å†å²
```bash
node view-tasks.js history
```

## ğŸ“ æ•°æ®å­˜å‚¨

### æ–‡ä»¶ç»“æ„
```
task-management/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ latest-attestors.json    # æœ€æ–°çš„ attestors ä¿¡æ¯
â”‚   â””â”€â”€ tasks-history.json       # ä»»åŠ¡å†å²è®°å½•
â”œâ”€â”€ create-task.js               # åˆ›å»ºä»»åŠ¡è„šæœ¬
â”œâ”€â”€ view-tasks.js               # æŸ¥çœ‹ä»»åŠ¡è„šæœ¬
â”œâ”€â”€ task-manager.sh             # äº¤äº’å¼ç®¡ç†è„šæœ¬
â””â”€â”€ quick-create-task.sh        # å¿«é€Ÿåˆ›å»ºè„šæœ¬
```

### æ•°æ®æ ¼å¼

#### latest-attestors.json
```json
{
  "taskId": "2",
  "timestamp": "2024-06-27T02:30:00.000Z",
  "seed": "0x1234...",
  "requestTimestamp": 1719456600,
  "attestors": [
    {
      "address": "0xaef2Ba08B0f836c81ed975452507825B5497e62f",
      "host": "wss://devint-reclaim0.mechain.tech/ws"
    }
  ]
}
```

#### tasks-history.json
```json
[
  {
    "taskId": "1",
    "timestamp": "2024-06-27T02:25:00.000Z",
    "seed": "0x5678...",
    "requestTimestamp": 1719456300,
    "attestors": [...]
  },
  {
    "taskId": "2",
    "timestamp": "2024-06-27T02:30:00.000Z",
    "seed": "0x1234...",
    "requestTimestamp": 1719456600,
    "attestors": [...]
  }
]
```

## ğŸ”§ åŠŸèƒ½è¯´æ˜

### createNewTaskRequest æ–¹æ³•
- **å‚æ•°**: 
  - `seed` (bytes32): éšæœºç§å­
  - `timestamp` (uint32): æ—¶é—´æˆ³
- **è¿”å›å€¼**: 
  - `taskId` (uint32): æ–°åˆ›å»ºçš„ä»»åŠ¡ID
  - `attestors` (Attestor[]): åˆ†é…ç»™ä»»åŠ¡çš„ attestors æ•°ç»„

### Attestor ç»“æ„
```solidity
struct Attestor {
    address addr;    // attestor çš„ä»¥å¤ªåŠåœ°å€
    string host;     // attestor çš„è¿æ¥åœ°å€
}
```

## ğŸ“Š ç¤ºä¾‹è¾“å‡º

### åˆ›å»ºä»»åŠ¡æˆåŠŸ
```
ğŸ”— æ­£åœ¨è¿æ¥åˆ° MeChain æµ‹è¯•ç½‘...
ğŸ“‹ ReclaimTask åˆçº¦åœ°å€: 0x2ce4693Ea2a41941F0A798A62BC1eE9c3c31c820
ğŸŒ ç½‘ç»œ: https://testnet-rpc.mechain.tech
ğŸ‘¤ å‘é€åœ°å€: 0xe44973079dfA1E56F6A5de82C167F7e6fD610cc5

ğŸ“Š æ­£åœ¨è·å–åˆçº¦åŸºæœ¬ä¿¡æ¯...
å½“å‰ä»»åŠ¡ID: 1
æ‰€éœ€attestorsæ•°é‡: 1
ä»»åŠ¡æŒç»­æ—¶é—´: 86400 ç§’ (1 å¤©)

ğŸ² ä»»åŠ¡å‚æ•°:
Seed: 0x1234567890abcdef...
Timestamp: 1719456600 (2024-06-27 10:30:00)

ğŸš€ æ­£åœ¨åˆ›å»ºæ–°ä»»åŠ¡...
ğŸ“ äº¤æ˜“å“ˆå¸Œ: 0xabcd1234...
â³ ç­‰å¾…äº¤æ˜“ç¡®è®¤...
âœ… äº¤æ˜“å·²ç¡®è®¤! Gasä½¿ç”¨é‡: 150000

============================================================
ğŸ‰ ä»»åŠ¡åˆ›å»ºæˆåŠŸ!
============================================================
æ–°ä»»åŠ¡ID: 2
ä»»åŠ¡å¼€å§‹æ—¶é—´: 2024-06-27 10:30:00
ä»»åŠ¡ç»“æŸæ—¶é—´: 2024-06-28 10:30:00
åˆ†é…çš„Attestorsæ•°é‡: 1

ğŸ‘¥ åˆ†é…çš„Attestors:
ğŸ”¸ Attestor 1:
   åœ°å€: 0xaef2Ba08B0f836c81ed975452507825B5497e62f
   Host: wss://devint-reclaim0.mechain.tech/ws

ğŸ’¾ æ­£åœ¨ä¿å­˜attestorsä¿¡æ¯åˆ°æœ¬åœ°æ–‡ä»¶...
âœ… Attestorsä¿¡æ¯å·²ä¿å­˜åˆ°:
   æœ€æ–°ä¿¡æ¯: data/latest-attestors.json
   å†å²è®°å½•: data/tasks-history.json

============================================================
âœ… ä»»åŠ¡åˆ›å»ºå®Œæˆ!
============================================================
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **åˆçº¦è°ƒç”¨å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤åˆçº¦åœ°å€æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥è´¦æˆ·ä½™é¢æ˜¯å¦è¶³å¤Ÿæ”¯ä»˜ gas è´¹ç”¨

2. **æ–‡ä»¶ä¿å­˜å¤±è´¥**
   - æ£€æŸ¥ç›®å½•æƒé™
   - ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´

3. **ä¾èµ–é—®é¢˜**
   ```bash
   cd .. && npm install
   ```

## ğŸ“ ä¸‹ä¸€æ­¥ä½¿ç”¨

åˆ›å»ºä»»åŠ¡åï¼Œæ‚¨å¯ä»¥ï¼š

1. **ä½¿ç”¨ä¿å­˜çš„ attestors ä¿¡æ¯**
   - è¯»å– `data/latest-attestors.json` æ–‡ä»¶
   - è·å– attestors çš„åœ°å€å’Œè¿æ¥ä¿¡æ¯
   - ç”¨äºä¸‹ä¸€æ­¥çš„ attestors è°ƒç”¨

2. **éªŒè¯ä»»åŠ¡çŠ¶æ€**
   - ä½¿ç”¨ `view-tasks.js` æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…
   - æ£€æŸ¥ä»»åŠ¡æ˜¯å¦æ­£ç¡®åˆ›å»º
   - ç›‘æ§ä»»åŠ¡çš„æ‰§è¡ŒçŠ¶æ€

3. **é›†æˆåˆ°å…¶ä»–è„šæœ¬**
   - å¯¼å…¥ `create-task.js` æ¨¡å—
   - ä½¿ç”¨ `getLatestAttestors()` å‡½æ•°è·å–æœ€æ–°æ•°æ®
   - ä½¿ç”¨ `getTasksHistory()` å‡½æ•°è·å–å†å²æ•°æ®
